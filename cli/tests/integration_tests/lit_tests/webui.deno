# SPDX-FileCopyrightText: Â© 2021 ChiselStrike <info@chiselstrike.com>

# RUN: sh -e @file

$CURL -d '{"code": "import { RouteMap } from \"@chiselstrike/api\"; export const routeMap = new RouteMap(); routeMap.prefix(\"/ep1\", async function(r) { return new Response(\"success\\n\") }); export const topicMap = undefined;"}' $CHISELD_INTERNAL/apply
# CHECK: access-control-allow-origin: *
# CHECK: access-control-allow-methods: POST, PUT, GET, OPTIONS

$CURL $CHISELD_HOST/dev/ep1
#CHECK: success
